<br/><br/>/*<br/> NOTE: If you are a casual user, just focus on the Client and Server classes (i.e. ignore this one).<br/> */<br/><br/>/*<br/> The ClientInfo is only used in the NetworkServer class and just serves a container of information about an individaul client (e.g. the vector "clients" consists of ClientInfo objects)<br/> */<br/>struct ClientInfo {<br/>&nbsp;&nbsp;&nbsp;&nbsp;sf::IpAddress ip;<br/>&nbsp;&nbsp;&nbsp;&nbsp;unsigned short udpPort = 0;<br/>&nbsp;&nbsp;&nbsp;&nbsp;sf::TcpSocket *tcp = nullptr;<br/>};<br/><br/>/*<br/> NetworkServer handles are the ugly network and thread stuff that someone implementing Server doesn't want to do.<br/> */<br/>class NetworkServer {<br/>public:<br/>&nbsp;&nbsp;&nbsp;&nbsp;NetworkServer(ServerCommunicator &com);<br/>&nbsp;&nbsp;&nbsp;&nbsp;bool networkUpdate();<br/>&nbsp;&nbsp;&nbsp;&nbsp;void sendTcp(std::string message, sf::IpAddress ip);<br/>&nbsp;&nbsp;&nbsp;&nbsp;void sendUdp(std::string message, sf::IpAddress ipAddressOfClient);<br/>&nbsp;&nbsp;&nbsp;&nbsp;virtual bool receivedTcp(std::string message, sf::IpAddress ip, long timeStamp) {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br/>&nbsp;&nbsp;&nbsp;&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;virtual bool receivedUdp(std::string message, sf::IpAddress ip, long timeStamp) {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;<br/>&nbsp;&nbsp;&nbsp;&nbsp;};<br/>&nbsp;&nbsp;&nbsp;&nbsp;virtual void gotNewClient(sf::IpAddress ip) {};<br/>&nbsp;&nbsp;&nbsp;&nbsp;virtual void lostClient(sf::IpAddress ip) {};<br/>&nbsp;&nbsp;&nbsp;&nbsp;bool shouldServerContinue();<br/>&nbsp;&nbsp;&nbsp;&nbsp;long getTime();<br/>private:<br/>&nbsp;&nbsp;&nbsp;&nbsp;ServerCommunicator &communicator;<br/>&nbsp;&nbsp;&nbsp;&nbsp;std::vector<ClientInfo> clients;<br/>&nbsp;&nbsp;&nbsp;&nbsp;void checkForNewClients();<br/>&nbsp;&nbsp;&nbsp;&nbsp;bool isClientInUpdatedList(sf::TcpSocket *client, std::vector<sf::TcpSocket *>&list);<br/>&nbsp;&nbsp;&nbsp;&nbsp;bool isInClientList(sf::TcpSocket *ip);<br/>&nbsp;&nbsp;&nbsp;&nbsp;void sendTcpBySocket(std::string message, sf::TcpSocket *socket);<br/>&nbsp;&nbsp;&nbsp;&nbsp;sf::UdpSocket udpSocket;<br/>};<br/><br/>